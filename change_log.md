# 代码仓库地址
git clone https://github.com/shoutoutuoadi325/vehicle-maintenance-management-system.git

# E-R图（含表结构）
![alt text](user_vehicle_repair_relationships.svg)
- 说明:<p>
PK: Primary Key (主键)<p>
FK: Foreign Key (外键)<p>
||--o{ 表示一对多关系 (箭头指向"多"的一方)<p>
}o--o{ 表示多对多关系 (通过一个中间连接表实现)<p>

# 当前进度
## 已修复的问题：
- ✅ **工时费计算优化**：改为基于实际工作时间计算（创建时间到完成时间的小时数 × 时薪）
- ✅ **浮点数计算精度问题**：前端添加精确的浮点数处理，保留两位小数
- ✅ **超级管理员订单详情显示**：优化后端查询，使用 LEFT JOIN FETCH 预加载用户和车辆信息
- ✅ **统计数据同步问题**：增强数据刷新机制，订单完成后自动更新统计数据

## 新增功能：
- ✅ **材料费由技师指定**：技师在维修过程中可以录入材料费用
- ✅ **实时工时费计算**：系统根据实际维修时间自动计算工时费
- ✅ **增强的错误处理**：改善前端错误提示和数据备用方案
- ✅ **优化的查询性能**：使用预加载避免 N+1 查询问题

## 技术改进：
- 后端使用 `TIMESTAMPDIFF(HOUR, created_at, completed_at)` 计算实际工作小时数
- 前端使用 `Math.round(value * 100) / 100` 确保浮点数精度
- 数据库查询优化，使用 `LEFT JOIN FETCH` 预加载关联数据
- 前端数据刷新机制，确保统计数据实时同步

## 测试状态：
- ✅ 用户注册登录功能
- ✅ 车辆管理功能  
- ✅ 维修工单管理
- ✅ 技师分配和任务处理
- ✅ 统计报表生成
- ✅ 反馈评价系统

# 前端运行时的注意事项
如果直接npm run serve失败：如果存在node_modules则删除这个文件夹及其中的所有内容，然后npm install之后再npm run serve即可

# 主要业务流程
1. **客户注册** → **添加车辆** → **提交维修申请**
2. **管理员审核** → **分配技师** → **设置费用预估**
3. **技师接单** → **记录材料费** → **完成维修** → **系统自动计算工时费**
4. **客户评价** → **系统统计分析** → **生成报表**