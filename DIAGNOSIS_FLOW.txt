```
┌─────────────────────────────────────────────────────────────────────┐
│                    AI Intelligent Diagnosis Flow                    │
│                      维修故障智能诊断流程图                          │
└─────────────────────────────────────────────────────────────────────┘

┌──────────────┐
│   用户界面    │  User clicks "预约维修" (Book Repair)
│ Customer UI  │
└──────┬───────┘
       │
       ▼
┌──────────────────────────────────────────────────────────────┐
│  预约维修表单 (Repair Order Form)                             │
│  ┌────────────────────────────────────────────────────────┐  │
│  │ 1. 选择车辆 (Select Vehicle)                            │  │
│  │    车牌: 京A12345 - 大众 速腾                           │  │
│  │                                                          │  │
│  │ 2. 故障描述 (Fault Description)                        │  │
│  │    ┌────────────────────────────────────────────────┐  │  │
│  │    │ 我的车发动机启动不了，打不着火                   │  │
│  │    └────────────────────────────────────────────────┘  │  │
│  │                                                          │  │
│  │    [🧠 AI智能诊断]  ← User clicks this button          │  │
│  └────────────────────────────────────────────────────────┘  │
└───────────────────────────┬──────────────────────────────────┘
                            │
                            ▼
         ┌─────────────────────────────────────┐
         │  Frontend sends POST request         │
         │  /api/diagnosis/analyze              │
         │  {                                    │
         │    description: "发动机启动不了...",  │
         │    vehicleBrand: "大众",              │
         │    vehicleModel: "速腾",              │
         │    mileage: 50000                     │
         │  }                                    │
         └────────────┬────────────────────────┘
                      │
                      ▼
         ┌────────────────────────────────────────┐
         │   DiagnosisController                  │
         │   @PostMapping("/analyze")             │
         └────────────┬───────────────────────────┘
                      │
                      ▼
         ┌────────────────────────────────────────┐
         │  IntelligentDiagnosisService           │
         │  ┌──────────────────────────────────┐  │
         │  │ 1. 关键词识别 (Keyword Detection)│  │
         │  │    - 检测: "发动机", "启动不了"  │  │
         │  │    - 匹配故障类型: 发动机故障    │  │
         │  │                                   │  │
         │  │ 2. 分析故障 (Analyze Fault)      │  │
         │  │    - 可能原因: 电池、启动马达... │  │
         │  │    - 严重程度: 高                │  │
         │  │    - 预估费用: ¥800              │  │
         │  │                                   │  │
         │  │ 3. 生成建议 (Generate Advice)    │  │
         │  │    - 检查电池电量和接线          │  │
         │  │    - 检查启动马达工作状况        │  │
         │  │    - 检查火花塞和点火线圈        │  │
         │  │                                   │  │
         │  │ 4. 推荐技师 (Recommend Tech)     │  │
         │  │    - 需要: 机械维修技师(MECHANIC)│  │
         │  └──────────────────────────────────┘  │
         └────────────┬───────────────────────────┘
                      │
                      ▼
         ┌────────────────────────────────────────┐
         │  DiagnosisResponse returned            │
         │  {                                      │
         │    faultType: "发动机故障",             │
         │    possibleCause: "电池电量不足...",    │
         │    recommendedActions: [...],           │
         │    estimatedSeverity: "高",             │
         │    estimatedCost: 800.0,                │
         │    skillTypeRequired: "MECHANIC"        │
         │  }                                      │
         └────────────┬───────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────┐
│  诊断结果展示 (Diagnosis Result Display)                     │
│  ┌────────────────────────────────────────────────────────┐ │
│  │ 🤖 AI诊断结果                                           │ │
│  │                                                          │ │
│  │ 故障类型: 发动机故障                                     │ │
│  │                                                          │ │
│  │ 可能原因: 电池电量不足、启动马达故障或点火系统故障       │ │
│  │                                                          │ │
│  │ 严重程度: [高]  ← Red/Orange highlight                 │ │
│  │                                                          │ │
│  │ 预估费用: ¥800                                          │ │
│  │                                                          │ │
│  │ 建议维修类型: 机械维修                                   │ │
│  │                                                          │ │
│  │ 建议措施:                                                │ │
│  │   • 检查电池电量和接线                                   │ │
│  │   • 检查启动马达工作状况                                 │ │
│  │   • 检查火花塞和点火线圈                                 │ │
│  │   • 检查燃油供应系统                                     │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  维修类型: [机械维修 ▼]  ← Auto-filled                      │
│                                                              │
│  [取消]  [提交预约]                                          │
└──────────────────────────────────────────────────────────────┘

Legend / 图例:
━━━━  Data flow / 数据流
┌───┐ Component / 组件
[ ]   Button / 按钮
▼     Action / 操作
```
