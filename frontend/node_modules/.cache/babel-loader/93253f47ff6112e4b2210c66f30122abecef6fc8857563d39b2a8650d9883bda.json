{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport Chart from '@/components/Chart.vue';\nexport default {\n  name: 'AdminDashboard',\n  components: {\n    Chart\n  },\n  data() {\n    return {\n      user: {},\n      activeTab: 'overview',\n      showUserMenu: false,\n      showOrderDetailModal: false,\n      showCreateTechnician: false,\n      showEditTechnician: false,\n      showAssignModal: false,\n      selectedOrder: null,\n      selectedOrderDetail: null,\n      editingTechnician: null,\n      orderFilter: '',\n      orderSortBy: 'createdAt',\n      orderSortDesc: true,\n      technicianForm: {\n        name: '',\n        employeeId: '',\n        username: '',\n        password: '',\n        phone: '',\n        email: '',\n        skillType: '',\n        hourlyRate: ''\n      },\n      assignForm: {\n        technicianIds: [],\n        laborCost: 0,\n        materialCost: 0\n      },\n      statistics: {\n        totalRevenue: 0,\n        totalOrders: 0,\n        activeTechnicians: 0,\n        avgOrderValue: 0,\n        monthlyGrowth: 0,\n        monthlyRevenue: []\n      },\n      allOrders: [],\n      technicians: [],\n      users: [],\n      dashboardStats: {\n        totalOrders: 0,\n        pendingOrders: 0,\n        completedOrders: 0,\n        activeTechnicians: 0\n      },\n      statisticsDateRange: {\n        start: '',\n        end: ''\n      }\n    };\n  },\n  computed: {\n    isManager() {\n      return this.user.role === 'MANAGER';\n    },\n    isSuperAdmin() {\n      return this.user.role === 'SUPER_ADMIN';\n    },\n    filteredOrders() {\n      if (!this.orderFilter) return this.allOrders;\n      return this.allOrders.filter(order => order.status === this.orderFilter);\n    },\n    filteredUsers() {\n      if (!this.userSearchTerm) return this.users;\n      return this.users.filter(user => user.name.toLowerCase().includes(this.userSearchTerm.toLowerCase()) || user.username.toLowerCase().includes(this.userSearchTerm.toLowerCase()));\n    },\n    recentOrders() {\n      return this.allOrders.slice(0, 10);\n    },\n    availableTechnicians() {\n      return this.technicians.filter(tech => tech.status !== 'INACTIVE');\n    },\n    totalCost() {\n      // 修复浮点数计算精度问题\n      const laborCost = parseFloat(this.assignForm.laborCost) || 0;\n      const materialCost = parseFloat(this.assignForm.materialCost) || 0;\n      return Math.round((laborCost + materialCost) * 100) / 100; // 保留两位小数\n    },\n    // 图表数据计算属性\n    revenueChartData() {\n      const laborCost = this.statistics.laborCost || 0;\n      const materialCost = this.statistics.materialCost || 0;\n      if (laborCost === 0 && materialCost === 0) {\n        return [{\n          label: '暂无数据',\n          value: 1\n        }];\n      }\n      return [{\n        label: '工时费',\n        value: laborCost\n      }, {\n        label: '材料费',\n        value: materialCost\n      }];\n    },\n    technicianTasksChartData() {\n      if (!this.statistics.technicianStats || this.statistics.technicianStats.length === 0) {\n        return [{\n          label: '暂无数据',\n          value: 0\n        }];\n      }\n      return this.statistics.technicianStats.map(tech => ({\n        label: tech.technicianName,\n        value: tech.completedTasks\n      }));\n    },\n    technicianEarningsChartData() {\n      if (!this.statistics.technicianStats || this.statistics.technicianStats.length === 0) {\n        return [{\n          label: '暂无数据',\n          value: 0\n        }];\n      }\n      return this.statistics.technicianStats.map(tech => ({\n        label: tech.technicianName,\n        value: tech.totalEarnings\n      }));\n    },\n    orderStatusChartData() {\n      const statusCounts = {\n        PENDING: 0,\n        ASSIGNED: 0,\n        IN_PROGRESS: 0,\n        COMPLETED: 0,\n        CANCELLED: 0\n      };\n      this.allOrders.forEach(order => {\n        if (statusCounts.hasOwnProperty(order.status)) {\n          statusCounts[order.status]++;\n        }\n      });\n      const data = Object.entries(statusCounts).filter(([status, count]) => count > 0).map(([status, count]) => ({\n        label: this.getStatusText(status),\n        value: count\n      }));\n      return data.length > 0 ? data : [{\n        label: '暂无数据',\n        value: 1\n      }];\n    }\n  },\n  created() {\n    this.loadUserInfo();\n    this.loadData();\n  },\n  methods: {\n    loadUserInfo() {\n      const userData = localStorage.getItem('user');\n      if (userData) {\n        this.user = JSON.parse(userData);\n        console.log('加载的管理员数据:', this.user);\n        if (!this.user.id) {\n          console.error('管理员数据中缺少ID字段:', this.user);\n          this.$emit('message', '用户数据错误，请重新登录', 'error');\n          this.logout();\n        }\n      } else {\n        console.error('localStorage中没有管理员数据');\n        this.$emit('message', '未找到用户信息，请重新登录', 'error');\n        this.logout();\n      }\n    },\n    async loadData() {\n      try {\n        this.isLoading = true;\n\n        // 先加载基础数据\n        await this.loadOrders();\n        await this.loadTechnicians();\n        if (this.isSuperAdmin) {\n          await this.loadUsers();\n        }\n\n        // 然后基于基础数据计算统计信息\n        await this.loadDashboardStats();\n\n        // 如果是超级管理员，初始化统计分析数据\n        if (this.isSuperAdmin) {\n          this.calculateLocalStatistics();\n        }\n      } catch (error) {\n        console.error('加载数据失败:', error);\n        this.$emit('message', '加载数据失败', 'error');\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async refreshData() {\n      this.$emit('message', '正在刷新数据...', 'info');\n      this.isLoading = true;\n      try {\n        await this.loadData();\n        // 强制重新计算统计数据\n        await this.loadDashboardStats();\n        if (this.isSuperAdmin) {\n          await this.loadDetailedStatistics();\n        }\n        this.$emit('message', '数据刷新完成', 'success');\n      } catch (error) {\n        console.error('刷新数据失败:', error);\n        this.$emit('message', '刷新数据失败: ' + error.message, 'error');\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async loadOrders() {\n      try {\n        const response = await this.$axios.get('/repair-orders');\n        this.allOrders = Array.isArray(response.data) ? response.data : [];\n        console.log('从API加载的订单数据:', this.allOrders);\n        console.log('订单数量:', this.allOrders.length);\n      } catch (error) {\n        console.error('加载订单失败:', error);\n        console.error('错误详情:', error.response?.data || error.message);\n        this.allOrders = [];\n        this.$emit('message', '加载订单数据失败: ' + (error.response?.data?.message || error.message), 'error');\n      }\n    },\n    async loadTechnicians() {\n      try {\n        const response = await this.$axios.get('/technicians');\n        this.technicians = Array.isArray(response.data) ? response.data : [];\n        console.log('从API加载的技师数据:', this.technicians);\n        console.log('技师数量:', this.technicians.length);\n      } catch (error) {\n        console.error('加载技师失败:', error);\n        console.error('错误详情:', error.response?.data || error.message);\n        this.technicians = [];\n        this.$emit('message', '加载技师数据失败: ' + (error.response?.data?.message || error.message), 'error');\n      }\n    },\n    async loadUsers() {\n      try {\n        const response = await this.$axios.get('/users/with-stats');\n        this.users = Array.isArray(response.data) ? response.data : [];\n        console.log('加载的用户数据（包含统计信息）:', this.users);\n      } catch (error) {\n        console.error('加载用户失败:', error);\n        console.error('错误详情:', error.response?.data);\n        this.users = [];\n        this.$emit('message', `加载用户数据失败: ${error.response?.data?.message || error.message}`, 'error');\n      }\n    },\n    async loadDashboardStats() {\n      try {\n        const response = await this.$axios.get('/admins/dashboard-stats');\n        this.dashboardStats = response.data;\n        console.log('加载统计数据成功:', this.dashboardStats);\n      } catch (error) {\n        console.error('加载统计数据失败，使用本地计算:', error);\n        // 基于本地数据计算统计信息\n        const orders = Array.isArray(this.allOrders) ? this.allOrders : [];\n        const techs = Array.isArray(this.technicians) ? this.technicians : [];\n        this.dashboardStats = {\n          totalOrders: orders.length,\n          pendingOrders: orders.filter(o => o.status === 'PENDING').length,\n          completedOrders: orders.filter(o => o.status === 'COMPLETED').length,\n          activeTechnicians: techs.length\n        };\n      }\n    },\n    async loadDetailedStatistics() {\n      if (!this.isSuperAdmin) return;\n      try {\n        const params = {};\n        if (this.statisticsDateRange.start) {\n          params.startDate = this.statisticsDateRange.start;\n        }\n        if (this.statisticsDateRange.end) {\n          params.endDate = this.statisticsDateRange.end;\n        }\n        const response = await this.$axios.get('/admins/detailed-statistics', {\n          params\n        });\n        this.statistics = response.data;\n        console.log('加载详细统计数据成功:', this.statistics);\n      } catch (error) {\n        console.error('加载详细统计数据失败，使用本地计算:', error);\n        this.calculateLocalStatistics();\n      }\n    },\n    async loadStatistics() {\n      if (!this.isSuperAdmin) return;\n      try {\n        // 尝试从API加载各种统计数据\n        const [revenueStats, techStats, feedbackStats] = await Promise.all([this.$axios.get('/repair-orders/analysis/monthly', {\n          params: {\n            year: 2024,\n            month: 12\n          }\n        }).catch(() => null), this.$axios.get('/repair-orders/task-statistics', {\n          params: {\n            startDate: this.statisticsDateRange.start,\n            endDate: this.statisticsDateRange.end\n          }\n        }).catch(() => null), this.$axios.get('/repair-orders/negative-feedback').catch(() => null)]);\n\n        // 如果API调用失败，基于本地数据计算统计信息\n        if (!revenueStats || !techStats || !feedbackStats) {\n          this.calculateLocalStatistics();\n        } else {\n          this.statistics = {\n            totalRevenue: revenueStats.data?.total_cost || 0,\n            laborCost: revenueStats.data?.total_labor_cost || 0,\n            materialCost: revenueStats.data?.total_material_cost || 0,\n            technicianStats: techStats.data || [],\n            negativeFeedback: feedbackStats.data || []\n          };\n        }\n      } catch (error) {\n        console.error('加载统计数据失败，使用本地计算:', error);\n        this.calculateLocalStatistics();\n      }\n    },\n    async calculateLocalStatistics() {\n      // 确保数据已初始化\n      if (!Array.isArray(this.allOrders)) {\n        this.allOrders = [];\n      }\n      if (!Array.isArray(this.technicians)) {\n        this.technicians = [];\n      }\n\n      // 基于本地订单数据计算统计信息\n      const completedOrders = this.allOrders.filter(o => o.status === 'COMPLETED');\n\n      // 计算收入统计\n      const totalRevenue = completedOrders.reduce((sum, order) => sum + (order.totalCost || 0), 0);\n      const laborCost = completedOrders.reduce((sum, order) => sum + (order.laborCost || 0), 0);\n      const materialCost = completedOrders.reduce((sum, order) => sum + (order.materialCost || 0), 0);\n\n      // 计算技师统计\n      const technicianStats = this.technicians.map(tech => {\n        const techOrders = completedOrders.filter(order => order.technicians && order.technicians.some(t => t.id === tech.id));\n        return {\n          technicianId: tech.id,\n          technicianName: tech.name,\n          skillType: tech.skillType,\n          completedTasks: techOrders.length,\n          totalEarnings: techOrders.reduce((sum, order) => sum + (order.laborCost || 0), 0)\n        };\n      });\n\n      // 获取真实的负面反馈数据\n      await this.loadNegativeFeedback();\n      this.statistics = {\n        totalRevenue,\n        laborCost,\n        materialCost,\n        technicianStats,\n        negativeFeedback: this.statistics.negativeFeedback || []\n      };\n    },\n    async loadNegativeFeedback() {\n      try {\n        const response = await this.$axios.get('/admins/negative-feedback');\n        this.statistics.negativeFeedback = response.data;\n      } catch (error) {\n        console.error('加载负面反馈失败:', error);\n        this.statistics.negativeFeedback = [];\n      }\n    },\n    async viewOrderDetail(order) {\n      try {\n        // 使用新的详细查询端点\n        const response = await this.$axios.get(`/repair-orders/${order.id}/details`);\n        this.selectedOrderDetail = response.data;\n        console.log('订单详情:', this.selectedOrderDetail);\n        this.showOrderDetailModal = true;\n      } catch (error) {\n        console.error('获取订单详情失败:', error);\n        // 如果详细端点不可用，回退到基本查询\n        try {\n          const fallbackResponse = await this.$axios.get(`/repair-orders/${order.id}`);\n          this.selectedOrderDetail = fallbackResponse.data;\n          this.showOrderDetailModal = true;\n        } catch (fallbackError) {\n          console.error('获取订单详情失败（备用方案也失败）:', fallbackError);\n          this.$emit('message', '获取订单详情失败', 'error');\n        }\n      }\n    },\n    closeOrderDetailModal() {\n      this.showOrderDetailModal = false;\n      this.selectedOrderDetail = null;\n    },\n    editOrder(order) {\n      // 实现订单编辑\n      this.$emit('message', '订单编辑功能开发中', 'info');\n    },\n    editTechnician(technician) {\n      // 实现技师编辑\n      this.$emit('message', '技师编辑功能开发中', 'info');\n    },\n    async deleteTechnician(technician) {\n      if (confirm(`确定要删除技师 ${technician.name} 吗？此操作不可撤销。`)) {\n        try {\n          await this.$axios.delete(`/technicians/${technician.id}`);\n          this.$emit('message', '技师删除成功', 'success');\n          // 重新加载技师列表\n          await this.loadTechnicians();\n          // 重新加载统计数据\n          await this.loadDashboardStats();\n        } catch (error) {\n          console.error('删除技师失败:', error);\n          this.$emit('message', '删除技师失败: ' + (error.response?.data?.message || error.message), 'error');\n        }\n      }\n    },\n    viewUserDetail(user) {\n      // 实现用户详情查看\n      this.$emit('message', '用户详情功能开发中', 'info');\n    },\n    toggleUserMenu() {\n      this.showUserMenu = !this.showUserMenu;\n    },\n    getRoleName(role) {\n      const roleMap = {\n        'MANAGER': '经理',\n        'SUPER_ADMIN': '超级管理员'\n      };\n      return roleMap[role] || role;\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'PENDING': '待处理',\n        'ASSIGNED': '已分配',\n        'IN_PROGRESS': '进行中',\n        'COMPLETED': '已完成',\n        'CANCELLED': '已取消'\n      };\n      return statusMap[status] || status;\n    },\n    getSkillTypeName(skillType) {\n      const skillMap = {\n        'MECHANIC': '机械维修',\n        'ELECTRICIAN': '电气维修',\n        'BODY_WORK': '车身维修',\n        'PAINT': '喷漆',\n        'DIAGNOSTIC': '诊断'\n      };\n      return skillMap[skillType] || skillType;\n    },\n    getVehicleDisplay(order) {\n      if (order.vehicle) {\n        const {\n          licensePlate,\n          brand,\n          model,\n          year\n        } = order.vehicle;\n        if (licensePlate && brand && model) {\n          return `${licensePlate} - ${brand} ${model}${year ? ` (${year})` : ''}`;\n        } else if (licensePlate) {\n          return licensePlate;\n        }\n      }\n      return '未知车辆';\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('zh-CN');\n    },\n    logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('userRole');\n      this.$router.push('/');\n    }\n  }\n};","map":{"version":3,"names":["Chart","name","components","data","user","activeTab","showUserMenu","showOrderDetailModal","showCreateTechnician","showEditTechnician","showAssignModal","selectedOrder","selectedOrderDetail","editingTechnician","orderFilter","orderSortBy","orderSortDesc","technicianForm","employeeId","username","password","phone","email","skillType","hourlyRate","assignForm","technicianIds","laborCost","materialCost","statistics","totalRevenue","totalOrders","activeTechnicians","avgOrderValue","monthlyGrowth","monthlyRevenue","allOrders","technicians","users","dashboardStats","pendingOrders","completedOrders","statisticsDateRange","start","end","computed","isManager","role","isSuperAdmin","filteredOrders","filter","order","status","filteredUsers","userSearchTerm","toLowerCase","includes","recentOrders","slice","availableTechnicians","tech","totalCost","parseFloat","Math","round","revenueChartData","label","value","technicianTasksChartData","technicianStats","length","map","technicianName","completedTasks","technicianEarningsChartData","totalEarnings","orderStatusChartData","statusCounts","PENDING","ASSIGNED","IN_PROGRESS","COMPLETED","CANCELLED","forEach","hasOwnProperty","Object","entries","count","getStatusText","created","loadUserInfo","loadData","methods","userData","localStorage","getItem","JSON","parse","console","log","id","error","$emit","logout","isLoading","loadOrders","loadTechnicians","loadUsers","loadDashboardStats","calculateLocalStatistics","refreshData","loadDetailedStatistics","message","response","$axios","get","Array","isArray","orders","techs","o","params","startDate","endDate","loadStatistics","revenueStats","techStats","feedbackStats","Promise","all","year","month","catch","total_cost","total_labor_cost","total_material_cost","negativeFeedback","reduce","sum","techOrders","some","t","technicianId","loadNegativeFeedback","viewOrderDetail","fallbackResponse","fallbackError","closeOrderDetailModal","editOrder","editTechnician","technician","deleteTechnician","confirm","delete","viewUserDetail","toggleUserMenu","getRoleName","roleMap","statusMap","getSkillTypeName","skillMap","getVehicleDisplay","vehicle","licensePlate","brand","model","formatDate","dateString","Date","toLocaleDateString","removeItem","$router","push"],"sources":["src/views/AdminDashboard.vue"],"sourcesContent":["<template>\n  <div class=\"admin-dashboard\">\n    <!-- 顶部导航栏 -->\n    <header class=\"dashboard-header\">\n      <div class=\"header-left\">\n        <div class=\"logo\">\n          <i class=\"fas fa-shield-alt\"></i>\n          <span>管理员控制台</span>\n        </div>\n        <nav class=\"nav-menu\">\n          <a href=\"#\" @click=\"activeTab = 'overview'\" :class=\"{ active: activeTab === 'overview' }\">\n            <i class=\"fas fa-home\"></i> 概览\n          </a>\n          <a v-if=\"isManager || isSuperAdmin\" href=\"#\" @click=\"activeTab = 'orders'\" :class=\"{ active: activeTab === 'orders' }\">\n            <i class=\"fas fa-clipboard-list\"></i> 订单管理\n          </a>\n          <a v-if=\"isManager || isSuperAdmin\" href=\"#\" @click=\"activeTab = 'technicians'\" :class=\"{ active: activeTab === 'technicians' }\">\n            <i class=\"fas fa-users-cog\"></i> 技师管理\n          </a>\n          <a v-if=\"isSuperAdmin\" href=\"#\" @click=\"activeTab = 'statistics'\" :class=\"{ active: activeTab === 'statistics' }\">\n            <i class=\"fas fa-chart-bar\"></i> 统计分析\n          </a>\n          <a v-if=\"isSuperAdmin\" href=\"#\" @click=\"activeTab = 'users'\" :class=\"{ active: activeTab === 'users' }\">\n            <i class=\"fas fa-users\"></i> 用户管理\n          </a>\n        </nav>\n      </div>\n      <div class=\"header-right\">\n        <div class=\"user-menu\" @click=\"toggleUserMenu\">\n          <div class=\"user-avatar\">\n            <i class=\"fas fa-user-shield\"></i>\n          </div>\n          <span class=\"user-name\">{{ user.name || user.username }}</span>\n          <span class=\"user-role\">{{ getRoleName(user.role) }}</span>\n          <i class=\"fas fa-chevron-down\"></i>\n        </div>\n        <div v-if=\"showUserMenu\" class=\"user-dropdown\">\n          <a href=\"#\" @click=\"activeTab = 'profile'\">\n            <i class=\"fas fa-user-edit\"></i> 个人资料\n          </a>\n          <a href=\"#\" @click=\"logout\">\n            <i class=\"fas fa-sign-out-alt\"></i> 登出\n          </a>\n        </div>\n      </div>\n    </header>\n\n    <!-- 主内容区域 -->\n    <main class=\"dashboard-main\">\n      <!-- 概览页面 -->\n      <div v-if=\"activeTab === 'overview'\" class=\"tab-content\">\n        <div class=\"welcome-section\">\n          <div class=\"welcome-content\">\n            <div>\n              <h1>欢迎，{{ user.name || user.username }}！</h1>\n              <div class=\"role-badge\">\n                <i class=\"fas fa-crown\"></i>\n                <span>{{ getRoleName(user.role) }}</span>\n              </div>\n            </div>\n            <button class=\"btn btn-outline\" @click=\"refreshData\" :disabled=\"isLoading\">\n              <i class=\"fas fa-sync-alt\" :class=\"{ 'fa-spin': isLoading }\"></i>\n              {{ isLoading ? '刷新中...' : '刷新数据' }}\n            </button>\n          </div>\n        </div>\n\n        <!-- 统计卡片 -->\n        <div class=\"stats-grid\">\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #3b82f6, #2563eb);\">\n              <i class=\"fas fa-clipboard-list\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ dashboardStats.totalOrders }}</h3>\n              <p>总订单数</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #f59e0b, #d97706);\">\n              <i class=\"fas fa-clock\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ dashboardStats.pendingOrders }}</h3>\n              <p>待处理订单</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #10b981, #059669);\">\n              <i class=\"fas fa-check-circle\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ dashboardStats.completedOrders }}</h3>\n              <p>已完成订单</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #8b5cf6, #7c3aed);\">\n              <i class=\"fas fa-users-cog\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>{{ dashboardStats.activeTechnicians }}</h3>\n              <p>活跃技师</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- 快速操作 -->\n        <div class=\"quick-actions\">\n          <h2>快速操作</h2>\n          <div class=\"action-grid\">\n            <div v-if=\"isManager || isSuperAdmin\" class=\"action-card\" @click=\"activeTab = 'orders'\">\n              <i class=\"fas fa-plus-circle\"></i>\n              <h3>分配订单</h3>\n              <p>为新订单分配技师和定价</p>\n            </div>\n            <div v-if=\"isManager || isSuperAdmin\" class=\"action-card\" @click=\"activeTab = 'technicians'\">\n              <i class=\"fas fa-user-plus\"></i>\n              <h3>管理技师</h3>\n              <p>添加或编辑技师信息</p>\n            </div>\n            <div v-if=\"isSuperAdmin\" class=\"action-card\" @click=\"activeTab = 'statistics'\">\n              <i class=\"fas fa-chart-line\"></i>\n              <h3>查看报表</h3>\n              <p>查看详细统计分析</p>\n            </div>\n            <div v-if=\"isSuperAdmin\" class=\"action-card\" @click=\"activeTab = 'users'\">\n              <i class=\"fas fa-users\"></i>\n              <h3>用户管理</h3>\n              <p>管理系统用户</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- 最近订单 -->\n        <div class=\"recent-orders\">\n          <h2>最近订单</h2>\n          <div class=\"orders-table\">\n            <table>\n              <thead>\n                <tr>\n                  <th>订单号</th>\n                  <th>客户</th>\n                  <th>车辆</th>\n                  <th>状态</th>\n                  <th>创建时间</th>\n                  <th>操作</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"order in recentOrders\" :key=\"order.id\">\n                  <td>{{ order.orderNumber }}</td>\n                  <td>{{ order.user?.name || '未知' }}</td>\n                  <td>{{ getVehicleDisplay(order) }}</td>\n                  <td>\n                    <span :class=\"['status-badge', order.status.toLowerCase()]\">\n                      {{ getStatusText(order.status) }}\n                    </span>\n                  </td>\n                  <td>{{ formatDate(order.createdAt) }}</td>\n                  <td>\n                    <button class=\"btn btn-sm btn-primary\" @click=\"viewOrderDetail(order)\">\n                      查看\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <!-- 订单管理页面 -->\n      <div v-if=\"activeTab === 'orders'\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>订单管理</h2>\n          <div class=\"order-filters\">\n            <select v-model=\"orderFilter\" class=\"form-input\">\n              <option value=\"\">全部状态</option>\n              <option value=\"PENDING\">待处理</option>\n              <option value=\"ASSIGNED\">已分配</option>\n              <option value=\"IN_PROGRESS\">进行中</option>\n              <option value=\"COMPLETED\">已完成</option>\n            </select>\n          </div>\n        </div>\n\n        <div class=\"orders-container\">\n          <div v-if=\"filteredOrders.length === 0\" class=\"empty-state\">\n            <i class=\"fas fa-clipboard-list\"></i>\n            <h3>暂无订单</h3>\n            <p>还没有维修订单</p>\n          </div>\n          <div v-for=\"order in filteredOrders\" :key=\"order.id\" class=\"order-card\">\n            <div class=\"order-header\">\n              <div>\n                <h3>{{ order.orderNumber }}</h3>\n                <p>{{ order.description }}</p>\n              </div>\n              <span :class=\"['status-badge', order.status.toLowerCase()]\">\n                {{ getStatusText(order.status) }}\n              </span>\n            </div>\n            <div class=\"order-body\">\n              <div class=\"order-info\">\n                <div class=\"info-item\">\n                  <i class=\"fas fa-user\"></i>\n                  <span>客户: {{ order.user?.name || '未知' }}</span>\n                </div>\n                <div class=\"info-item\">\n                  <i class=\"fas fa-car\"></i>\n                  <span>车辆: {{ getVehicleDisplay(order) }}</span>\n                </div>\n                <div class=\"info-item\">\n                  <i class=\"fas fa-calendar\"></i>\n                  <span>创建: {{ formatDate(order.createdAt) }}</span>\n                </div>\n                <div class=\"info-item\">\n                  <i class=\"fas fa-dollar-sign\"></i>\n                  <span>费用: ¥{{ order.totalCost || 0 }}</span>\n                </div>\n              </div>\n              <div v-if=\"order.technicians && order.technicians.length > 0\" class=\"assigned-technicians\">\n                <h4>分配技师:</h4>\n                <div class=\"technician-list\">\n                  <span v-for=\"tech in order.technicians\" :key=\"tech.id\" class=\"technician-tag\">\n                    {{ tech.name }} ({{ getSkillTypeName(tech.skillType) }})\n                  </span>\n                </div>\n              </div>\n            </div>\n            <div class=\"order-footer\">\n              <button class=\"btn btn-outline\" @click=\"viewOrderDetail(order)\">\n                <i class=\"fas fa-eye\"></i> 查看详情\n              </button>\n              <button class=\"btn btn-outline\" @click=\"editOrder(order)\">\n                <i class=\"fas fa-edit\"></i> 编辑\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 技师管理页面 -->\n      <div v-if=\"activeTab === 'technicians'\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>技师管理</h2>\n          <button class=\"btn btn-primary\" @click=\"showCreateTechnician = true\">\n            <i class=\"fas fa-plus\"></i> 添加技师\n          </button>\n        </div>\n\n        <div class=\"technicians-container\">\n          <div v-if=\"technicians.length === 0\" class=\"empty-state\">\n            <i class=\"fas fa-users-cog\"></i>\n            <h3>暂无技师</h3>\n            <p>还没有添加技师</p>\n          </div>\n          <div v-for=\"technician in technicians\" :key=\"technician.id\" class=\"technician-card\">\n            <div class=\"tech-avatar\">\n              <i class=\"fas fa-user-hard-hat\"></i>\n            </div>\n            <div class=\"tech-info\">\n              <h3>{{ technician.name }}</h3>\n              <p class=\"tech-id\">员工ID: {{ technician.employeeId }}</p>\n              <div class=\"tech-details\">\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-cogs\"></i>\n                  <span>{{ getSkillTypeName(technician.skillType) }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-dollar-sign\"></i>\n                  <span>¥{{ technician.hourlyRate }}/小时</span>\n                </div>\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-phone\"></i>\n                  <span>{{ technician.phone }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <i class=\"fas fa-envelope\"></i>\n                  <span>{{ technician.email }}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"tech-actions\">\n              <button class=\"btn btn-outline btn-sm\" @click=\"editTechnician(technician)\">\n                <i class=\"fas fa-edit\"></i> 编辑\n              </button>\n              <button class=\"btn btn-danger btn-sm\" @click=\"deleteTechnician(technician)\">\n                <i class=\"fas fa-trash\"></i> 删除\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 统计分析页面 (仅超级管理员) -->\n      <div v-if=\"activeTab === 'statistics' && isSuperAdmin\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>统计分析</h2>\n          <div class=\"date-filters\">\n            <input v-model=\"statisticsDateRange.start\" type=\"date\" class=\"form-input\">\n            <span>至</span>\n            <input v-model=\"statisticsDateRange.end\" type=\"date\" class=\"form-input\">\n            <button class=\"btn btn-primary\" @click=\"loadStatistics\">\n              <i class=\"fas fa-search\"></i> 查询\n            </button>\n          </div>\n        </div>\n\n        <div class=\"statistics-container\">\n          <!-- 图表区域 -->\n          <div class=\"charts-grid\">\n            <!-- 收入构成图表 -->\n            <div class=\"chart-card\">\n              <Chart\n                title=\"收入构成分析\"\n                type=\"pie\"\n                :data=\"revenueChartData\"\n                :size=\"200\"\n              />\n            </div>\n\n            <!-- 技师任务数量图表 -->\n            <div class=\"chart-card\">\n              <Chart\n                title=\"技师完成任务数量\"\n                type=\"bar\"\n                :data=\"technicianTasksChartData\"\n                :width=\"400\"\n                :height=\"300\"\n              />\n            </div>\n\n            <!-- 技师收入图表 -->\n            <div class=\"chart-card\">\n              <Chart\n                title=\"技师收入统计\"\n                type=\"bar\"\n                :data=\"technicianEarningsChartData\"\n                :width=\"400\"\n                :height=\"300\"\n              />\n            </div>\n\n            <!-- 订单状态分布 -->\n            <div class=\"chart-card\">\n              <Chart\n                title=\"订单状态分布\"\n                type=\"pie\"\n                :data=\"orderStatusChartData\"\n                :size=\"200\"\n              />\n            </div>\n          </div>\n\n          <!-- 详细数据表格 -->\n          <div class=\"stat-section\">\n            <h3>技师工作量详细统计</h3>\n            <div class=\"technician-stats\">\n                              <table>\n                  <thead>\n                    <tr>\n                      <th>技师</th>\n                      <th>技能类型</th>\n                      <th>完成任务数</th>\n                      <th>总收入</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"stat in statistics.technicianStats\" :key=\"stat.technicianId\">\n                      <td>{{ stat.technicianName }}</td>\n                      <td>{{ getSkillTypeName(stat.skillType) }}</td>\n                      <td>{{ stat.completedTasks }}</td>\n                      <td>¥{{ stat.totalEarnings }}</td>\n                    </tr>\n                  </tbody>\n                </table>\n            </div>\n          </div>\n\n          <!-- 负面反馈统计 -->\n          <div class=\"stat-section\">\n            <h3>负面反馈统计</h3>\n            <div class=\"feedback-stats\">\n              <div v-if=\"statistics.negativeFeedback && statistics.negativeFeedback.length > 0\">\n                                  <table>\n                    <thead>\n                      <tr>\n                        <th>订单号</th>\n                        <th>反馈内容</th>\n                        <th>技师</th>\n                        <th>日期</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr v-for=\"feedback in statistics.negativeFeedback\" :key=\"feedback.orderId\">\n                        <td>{{ feedback.orderNumber }}</td>\n                        <td>{{ feedback.comment }}</td>\n                        <td>{{ feedback.technicianName }}</td>\n                        <td>{{ formatDate(feedback.date) }}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n              </div>\n              <div v-else class=\"no-feedback\">\n                <i class=\"fas fa-smile\"></i>\n                <p>暂无负面反馈，服务质量良好！</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 用户管理页面 (仅超级管理员) -->\n      <div v-if=\"activeTab === 'users' && isSuperAdmin\" class=\"tab-content\">\n        <div class=\"section-header\">\n          <h2>用户管理</h2>\n          <div class=\"user-filters\">\n            <input v-model=\"userSearchTerm\" placeholder=\"搜索用户...\" class=\"form-input\">\n            <button class=\"btn btn-primary\" @click=\"loadUsers\">\n              <i class=\"fas fa-search\"></i> 搜索\n            </button>\n          </div>\n        </div>\n\n        <div class=\"users-container\">\n          <table class=\"users-table\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>用户名</th>\n                <th>姓名</th>\n                <th>电话</th>\n                <th>邮箱</th>\n                <th>车辆数</th>\n                <th>订单数</th>\n                <th>操作</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"user in filteredUsers\" :key=\"user.id\">\n                <td>{{ user.id }}</td>\n                <td>{{ user.username }}</td>\n                <td>{{ user.name }}</td>\n                <td>{{ user.phone }}</td>\n                <td>{{ user.email }}</td>\n                <td>{{ user.vehicleCount || 0 }}</td>\n                <td>{{ user.orderCount || 0 }}</td>\n                <td>\n                  <button class=\"btn btn-outline btn-sm\" @click=\"viewUserDetail(user)\">\n                    查看\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </main>\n\n    <!-- 订单详情模态框 -->\n    <div v-if=\"showOrderDetailModal && selectedOrderDetail\" class=\"modal-overlay\" @click=\"closeOrderDetailModal\">\n      <div class=\"modal-content\" @click.stop>\n        <div class=\"modal-header\">\n          <h2>订单详情: {{ selectedOrderDetail.orderNumber }}</h2>\n          <button class=\"modal-close\" @click=\"closeOrderDetailModal\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"order-detail-sections\">\n            <div class=\"detail-section\">\n              <h3>基本信息</h3>\n              <div class=\"detail-grid\">\n                <div class=\"detail-item\">\n                  <label>订单号:</label>\n                  <span>{{ selectedOrderDetail.orderNumber }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>状态:</label>\n                  <span :class=\"['status-badge', selectedOrderDetail.status.toLowerCase()]\">\n                    {{ getStatusText(selectedOrderDetail.status) }}\n                  </span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>描述:</label>\n                  <span>{{ selectedOrderDetail.description }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>创建时间:</label>\n                  <span>{{ formatDate(selectedOrderDetail.createdAt) }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>更新时间:</label>\n                  <span>{{ formatDate(selectedOrderDetail.updatedAt) }}</span>\n                </div>\n                <div v-if=\"selectedOrderDetail.completedAt\" class=\"detail-item\">\n                  <label>完成时间:</label>\n                  <span>{{ formatDate(selectedOrderDetail.completedAt) }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"detail-section\">\n              <h3>客户信息</h3>\n              <div class=\"detail-grid\">\n                <div class=\"detail-item\">\n                  <label>客户姓名:</label>\n                  <span>{{ selectedOrderDetail.user?.name || '未知' }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>联系电话:</label>\n                  <span>{{ selectedOrderDetail.user?.phone || '未知' }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>邮箱:</label>\n                  <span>{{ selectedOrderDetail.user?.email || '未知' }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"detail-section\">\n              <h3>车辆信息</h3>\n              <div class=\"detail-grid\">\n                <div class=\"detail-item\">\n                  <label>车牌号:</label>\n                  <span>{{ selectedOrderDetail.vehicle?.licensePlate || '未知' }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>品牌:</label>\n                  <span>{{ selectedOrderDetail.vehicle?.brand || '未知' }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>型号:</label>\n                  <span>{{ selectedOrderDetail.vehicle?.model || '未知' }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>年份:</label>\n                  <span>{{ selectedOrderDetail.vehicle?.year || '未知' }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div v-if=\"selectedOrderDetail.technicians && selectedOrderDetail.technicians.length > 0\" class=\"detail-section\">\n              <h3>分配技师</h3>\n              <div class=\"technician-list\">\n                <div v-for=\"tech in selectedOrderDetail.technicians\" :key=\"tech.id\" class=\"technician-item\">\n                  <div class=\"tech-info\">\n                    <span class=\"tech-name\">{{ tech.name }}</span>\n                    <span class=\"tech-skill\">{{ getSkillTypeName(tech.skillType) }}</span>\n                    <span class=\"tech-rate\">¥{{ tech.hourlyRate }}/小时</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"detail-section\">\n              <h3>费用信息</h3>\n              <div class=\"detail-grid\">\n                <div class=\"detail-item\">\n                  <label>工时费:</label>\n                  <span>¥{{ selectedOrderDetail.laborCost || 0 }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>材料费:</label>\n                  <span>¥{{ selectedOrderDetail.materialCost || 0 }}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <label>总费用:</label>\n                  <span class=\"total-cost\">¥{{ selectedOrderDetail.totalCost || 0 }}</span>\n                </div>\n              </div>\n            </div>\n            \n\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button @click=\"closeOrderDetailModal\" class=\"btn btn-outline\">\n            <i class=\"fas fa-times\"></i> 关闭\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 添加技师模态框 -->\n  </div>\n</template>\n\n<script>\nimport Chart from '@/components/Chart.vue';\n\nexport default {\n  name: 'AdminDashboard',\n  components: {\n    Chart\n  },\n  data() {\n    return {\n      user: {},\n      activeTab: 'overview',\n      showUserMenu: false,\n      showOrderDetailModal: false,\n      showCreateTechnician: false,\n      showEditTechnician: false,\n      showAssignModal: false,\n      selectedOrder: null,\n      selectedOrderDetail: null,\n      editingTechnician: null,\n      orderFilter: '',\n      orderSortBy: 'createdAt',\n      orderSortDesc: true,\n      technicianForm: {\n        name: '',\n        employeeId: '',\n        username: '',\n        password: '',\n        phone: '',\n        email: '',\n        skillType: '',\n        hourlyRate: ''\n      },\n      assignForm: {\n        technicianIds: [],\n        laborCost: 0,\n        materialCost: 0\n      },\n      statistics: {\n        totalRevenue: 0,\n        totalOrders: 0,\n        activeTechnicians: 0,\n        avgOrderValue: 0,\n        monthlyGrowth: 0,\n        monthlyRevenue: []\n      },\n      allOrders: [],\n      technicians: [],\n      users: [],\n      dashboardStats: {\n        totalOrders: 0,\n        pendingOrders: 0,\n        completedOrders: 0,\n        activeTechnicians: 0\n      },\n      statisticsDateRange: {\n        start: '',\n        end: ''\n      }\n    }\n  },\n  computed: {\n    isManager() {\n      return this.user.role === 'MANAGER';\n    },\n    isSuperAdmin() {\n      return this.user.role === 'SUPER_ADMIN';\n    },\n    filteredOrders() {\n      if (!this.orderFilter) return this.allOrders;\n      return this.allOrders.filter(order => order.status === this.orderFilter);\n    },\n    filteredUsers() {\n      if (!this.userSearchTerm) return this.users;\n      return this.users.filter(user => \n        user.name.toLowerCase().includes(this.userSearchTerm.toLowerCase()) ||\n        user.username.toLowerCase().includes(this.userSearchTerm.toLowerCase())\n      );\n    },\n    recentOrders() {\n      return this.allOrders.slice(0, 10);\n    },\n    availableTechnicians() {\n      return this.technicians.filter(tech => tech.status !== 'INACTIVE');\n    },\n    totalCost() {\n      // 修复浮点数计算精度问题\n      const laborCost = parseFloat(this.assignForm.laborCost) || 0;\n      const materialCost = parseFloat(this.assignForm.materialCost) || 0;\n      return Math.round((laborCost + materialCost) * 100) / 100; // 保留两位小数\n    },\n    // 图表数据计算属性\n    revenueChartData() {\n      const laborCost = this.statistics.laborCost || 0;\n      const materialCost = this.statistics.materialCost || 0;\n      \n      if (laborCost === 0 && materialCost === 0) {\n        return [{ label: '暂无数据', value: 1 }];\n      }\n      \n      return [\n        { label: '工时费', value: laborCost },\n        { label: '材料费', value: materialCost }\n      ];\n    },\n    technicianTasksChartData() {\n      if (!this.statistics.technicianStats || this.statistics.technicianStats.length === 0) {\n        return [{ label: '暂无数据', value: 0 }];\n      }\n      \n      return this.statistics.technicianStats.map(tech => ({\n        label: tech.technicianName,\n        value: tech.completedTasks\n      }));\n    },\n    technicianEarningsChartData() {\n      if (!this.statistics.technicianStats || this.statistics.technicianStats.length === 0) {\n        return [{ label: '暂无数据', value: 0 }];\n      }\n      \n      return this.statistics.technicianStats.map(tech => ({\n        label: tech.technicianName,\n        value: tech.totalEarnings\n      }));\n    },\n    orderStatusChartData() {\n      const statusCounts = {\n        PENDING: 0,\n        ASSIGNED: 0,\n        IN_PROGRESS: 0,\n        COMPLETED: 0,\n        CANCELLED: 0\n      };\n      \n      this.allOrders.forEach(order => {\n        if (statusCounts.hasOwnProperty(order.status)) {\n          statusCounts[order.status]++;\n        }\n      });\n      \n      const data = Object.entries(statusCounts)\n        .filter(([status, count]) => count > 0)\n        .map(([status, count]) => ({\n          label: this.getStatusText(status),\n          value: count\n        }));\n      \n      return data.length > 0 ? data : [{ label: '暂无数据', value: 1 }];\n    }\n  },\n  created() {\n    this.loadUserInfo();\n    this.loadData();\n  },\n  methods: {\n    loadUserInfo() {\n      const userData = localStorage.getItem('user');\n      if (userData) {\n        this.user = JSON.parse(userData);\n        console.log('加载的管理员数据:', this.user);\n        \n        if (!this.user.id) {\n          console.error('管理员数据中缺少ID字段:', this.user);\n          this.$emit('message', '用户数据错误，请重新登录', 'error');\n          this.logout();\n        }\n      } else {\n        console.error('localStorage中没有管理员数据');\n        this.$emit('message', '未找到用户信息，请重新登录', 'error');\n        this.logout();\n      }\n    },\n    async loadData() {\n      try {\n        this.isLoading = true;\n        \n        // 先加载基础数据\n        await this.loadOrders();\n        await this.loadTechnicians();\n        \n        if (this.isSuperAdmin) {\n          await this.loadUsers();\n        }\n        \n        // 然后基于基础数据计算统计信息\n        await this.loadDashboardStats();\n        \n        // 如果是超级管理员，初始化统计分析数据\n        if (this.isSuperAdmin) {\n          this.calculateLocalStatistics();\n        }\n      } catch (error) {\n        console.error('加载数据失败:', error);\n        this.$emit('message', '加载数据失败', 'error');\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    \n    async refreshData() {\n      this.$emit('message', '正在刷新数据...', 'info');\n      this.isLoading = true;\n      try {\n        await this.loadData();\n        // 强制重新计算统计数据\n        await this.loadDashboardStats();\n        if (this.isSuperAdmin) {\n          await this.loadDetailedStatistics();\n        }\n        this.$emit('message', '数据刷新完成', 'success');\n      } catch (error) {\n        console.error('刷新数据失败:', error);\n        this.$emit('message', '刷新数据失败: ' + error.message, 'error');\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async loadOrders() {\n      try {\n        const response = await this.$axios.get('/repair-orders');\n        this.allOrders = Array.isArray(response.data) ? response.data : [];\n        console.log('从API加载的订单数据:', this.allOrders);\n        console.log('订单数量:', this.allOrders.length);\n      } catch (error) {\n        console.error('加载订单失败:', error);\n        console.error('错误详情:', error.response?.data || error.message);\n        this.allOrders = [];\n        this.$emit('message', '加载订单数据失败: ' + (error.response?.data?.message || error.message), 'error');\n      }\n    },\n    async loadTechnicians() {\n      try {\n        const response = await this.$axios.get('/technicians');\n        this.technicians = Array.isArray(response.data) ? response.data : [];\n        console.log('从API加载的技师数据:', this.technicians);\n        console.log('技师数量:', this.technicians.length);\n      } catch (error) {\n        console.error('加载技师失败:', error);\n        console.error('错误详情:', error.response?.data || error.message);\n        this.technicians = [];\n        this.$emit('message', '加载技师数据失败: ' + (error.response?.data?.message || error.message), 'error');\n      }\n    },\n    async loadUsers() {\n      try {\n        const response = await this.$axios.get('/users/with-stats');\n        this.users = Array.isArray(response.data) ? response.data : [];\n        console.log('加载的用户数据（包含统计信息）:', this.users);\n      } catch (error) {\n        console.error('加载用户失败:', error);\n        console.error('错误详情:', error.response?.data);\n        this.users = [];\n        this.$emit('message', `加载用户数据失败: ${error.response?.data?.message || error.message}`, 'error');\n      }\n    },\n    async loadDashboardStats() {\n      try {\n        const response = await this.$axios.get('/admins/dashboard-stats');\n        this.dashboardStats = response.data;\n        console.log('加载统计数据成功:', this.dashboardStats);\n      } catch (error) {\n        console.error('加载统计数据失败，使用本地计算:', error);\n        // 基于本地数据计算统计信息\n        const orders = Array.isArray(this.allOrders) ? this.allOrders : [];\n        const techs = Array.isArray(this.technicians) ? this.technicians : [];\n        \n        this.dashboardStats = {\n          totalOrders: orders.length,\n          pendingOrders: orders.filter(o => o.status === 'PENDING').length,\n          completedOrders: orders.filter(o => o.status === 'COMPLETED').length,\n          activeTechnicians: techs.length\n        };\n      }\n    },\n    async loadDetailedStatistics() {\n      if (!this.isSuperAdmin) return;\n      \n      try {\n        const params = {};\n        if (this.statisticsDateRange.start) {\n          params.startDate = this.statisticsDateRange.start;\n        }\n        if (this.statisticsDateRange.end) {\n          params.endDate = this.statisticsDateRange.end;\n        }\n        \n        const response = await this.$axios.get('/admins/detailed-statistics', { params });\n        this.statistics = response.data;\n        console.log('加载详细统计数据成功:', this.statistics);\n      } catch (error) {\n        console.error('加载详细统计数据失败，使用本地计算:', error);\n        this.calculateLocalStatistics();\n      }\n    },\n    \n    async loadStatistics() {\n      if (!this.isSuperAdmin) return;\n      \n      try {\n        // 尝试从API加载各种统计数据\n        const [revenueStats, techStats, feedbackStats] = await Promise.all([\n          this.$axios.get('/repair-orders/analysis/monthly', {\n            params: { year: 2024, month: 12 }\n          }).catch(() => null),\n          this.$axios.get('/repair-orders/task-statistics', {\n            params: { \n              startDate: this.statisticsDateRange.start,\n              endDate: this.statisticsDateRange.end\n            }\n          }).catch(() => null),\n          this.$axios.get('/repair-orders/negative-feedback').catch(() => null)\n        ]);\n        \n        // 如果API调用失败，基于本地数据计算统计信息\n        if (!revenueStats || !techStats || !feedbackStats) {\n          this.calculateLocalStatistics();\n        } else {\n          this.statistics = {\n            totalRevenue: revenueStats.data?.total_cost || 0,\n            laborCost: revenueStats.data?.total_labor_cost || 0,\n            materialCost: revenueStats.data?.total_material_cost || 0,\n            technicianStats: techStats.data || [],\n            negativeFeedback: feedbackStats.data || []\n          };\n        }\n      } catch (error) {\n        console.error('加载统计数据失败，使用本地计算:', error);\n        this.calculateLocalStatistics();\n      }\n    },\n    \n    async calculateLocalStatistics() {\n      // 确保数据已初始化\n      if (!Array.isArray(this.allOrders)) {\n        this.allOrders = [];\n      }\n      if (!Array.isArray(this.technicians)) {\n        this.technicians = [];\n      }\n      \n      // 基于本地订单数据计算统计信息\n      const completedOrders = this.allOrders.filter(o => o.status === 'COMPLETED');\n      \n      // 计算收入统计\n      const totalRevenue = completedOrders.reduce((sum, order) => sum + (order.totalCost || 0), 0);\n      const laborCost = completedOrders.reduce((sum, order) => sum + (order.laborCost || 0), 0);\n      const materialCost = completedOrders.reduce((sum, order) => sum + (order.materialCost || 0), 0);\n      \n      // 计算技师统计\n      const technicianStats = this.technicians.map(tech => {\n        const techOrders = completedOrders.filter(order => \n          order.technicians && order.technicians.some(t => t.id === tech.id)\n        );\n        \n        return {\n          technicianId: tech.id,\n          technicianName: tech.name,\n          skillType: tech.skillType,\n          completedTasks: techOrders.length,\n          totalEarnings: techOrders.reduce((sum, order) => sum + (order.laborCost || 0), 0)\n        };\n      });\n      \n      // 获取真实的负面反馈数据\n      await this.loadNegativeFeedback();\n      \n      this.statistics = {\n        totalRevenue,\n        laborCost,\n        materialCost,\n        technicianStats,\n        negativeFeedback: this.statistics.negativeFeedback || []\n      };\n    },\n    \n\n    \n    async loadNegativeFeedback() {\n      try {\n        const response = await this.$axios.get('/admins/negative-feedback');\n        this.statistics.negativeFeedback = response.data;\n      } catch (error) {\n        console.error('加载负面反馈失败:', error);\n        this.statistics.negativeFeedback = [];\n      }\n    },\n    async viewOrderDetail(order) {\n      try {\n        // 使用新的详细查询端点\n        const response = await this.$axios.get(`/repair-orders/${order.id}/details`);\n        this.selectedOrderDetail = response.data;\n        console.log('订单详情:', this.selectedOrderDetail);\n        this.showOrderDetailModal = true;\n      } catch (error) {\n        console.error('获取订单详情失败:', error);\n        // 如果详细端点不可用，回退到基本查询\n        try {\n          const fallbackResponse = await this.$axios.get(`/repair-orders/${order.id}`);\n          this.selectedOrderDetail = fallbackResponse.data;\n          this.showOrderDetailModal = true;\n        } catch (fallbackError) {\n          console.error('获取订单详情失败（备用方案也失败）:', fallbackError);\n          this.$emit('message', '获取订单详情失败', 'error');\n        }\n      }\n    },\n    closeOrderDetailModal() {\n      this.showOrderDetailModal = false;\n      this.selectedOrderDetail = null;\n    },\n    editOrder(order) {\n      // 实现订单编辑\n      this.$emit('message', '订单编辑功能开发中', 'info');\n    },\n    editTechnician(technician) {\n      // 实现技师编辑\n      this.$emit('message', '技师编辑功能开发中', 'info');\n    },\n    async deleteTechnician(technician) {\n      if (confirm(`确定要删除技师 ${technician.name} 吗？此操作不可撤销。`)) {\n        try {\n          await this.$axios.delete(`/technicians/${technician.id}`);\n          this.$emit('message', '技师删除成功', 'success');\n          // 重新加载技师列表\n          await this.loadTechnicians();\n          // 重新加载统计数据\n          await this.loadDashboardStats();\n        } catch (error) {\n          console.error('删除技师失败:', error);\n          this.$emit('message', '删除技师失败: ' + (error.response?.data?.message || error.message), 'error');\n        }\n      }\n    },\n    viewUserDetail(user) {\n      // 实现用户详情查看\n      this.$emit('message', '用户详情功能开发中', 'info');\n    },\n    toggleUserMenu() {\n      this.showUserMenu = !this.showUserMenu;\n    },\n    getRoleName(role) {\n      const roleMap = {\n        'MANAGER': '经理',\n        'SUPER_ADMIN': '超级管理员'\n      };\n      return roleMap[role] || role;\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'PENDING': '待处理',\n        'ASSIGNED': '已分配',\n        'IN_PROGRESS': '进行中',\n        'COMPLETED': '已完成',\n        'CANCELLED': '已取消'\n      };\n      return statusMap[status] || status;\n    },\n    getSkillTypeName(skillType) {\n      const skillMap = {\n        'MECHANIC': '机械维修',\n        'ELECTRICIAN': '电气维修',\n        'BODY_WORK': '车身维修',\n        'PAINT': '喷漆',\n        'DIAGNOSTIC': '诊断'\n      };\n      return skillMap[skillType] || skillType;\n    },\n    getVehicleDisplay(order) {\n      if (order.vehicle) {\n        const { licensePlate, brand, model, year } = order.vehicle;\n        if (licensePlate && brand && model) {\n          return `${licensePlate} - ${brand} ${model}${year ? ` (${year})` : ''}`;\n        } else if (licensePlate) {\n          return licensePlate;\n        }\n      }\n      return '未知车辆';\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('zh-CN');\n    },\n    logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('userRole');\n      this.$router.push('/');\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 这里包含所有的CSS样式，与之前的技师页面类似但使用蓝色主题 */\n.admin-dashboard {\n  min-height: 100vh;\n  background: #f8fafc;\n}\n\n.dashboard-header {\n  background: white;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  padding: 0 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #3b82f6;\n}\n\n.nav-menu {\n  display: flex;\n  gap: 1rem;\n}\n\n.nav-menu a {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 1rem;\n  text-decoration: none;\n  color: #6b7280;\n  transition: color 0.2s;\n  border-bottom: 3px solid transparent;\n}\n\n.nav-menu a:hover,\n.nav-menu a.active {\n  color: #3b82f6;\n  border-bottom-color: #3b82f6;\n}\n\n.header-right {\n  position: relative;\n}\n\n.user-menu {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  border-radius: 0.5rem;\n  transition: background-color 0.2s;\n}\n\n.user-menu:hover {\n  background: #f3f4f6;\n}\n\n.user-avatar {\n  width: 2rem;\n  height: 2rem;\n  background: #3b82f6;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n\n.user-role {\n  font-size: 0.75rem;\n  color: #6b7280;\n  background: #f3f4f6;\n  padding: 0.25rem 0.5rem;\n  border-radius: 9999px;\n}\n\n.user-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background: white;\n  border-radius: 0.5rem;\n  box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n  min-width: 200px;\n  z-index: 1000;\n}\n\n.user-dropdown a {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  text-decoration: none;\n  color: #374151;\n  transition: background-color 0.2s;\n}\n\n.user-dropdown a:hover {\n  background: #f3f4f6;\n}\n\n.dashboard-main {\n  padding: 2rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.tab-content {\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.welcome-section {\n  margin-bottom: 2rem;\n}\n\n.welcome-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  text-align: center;\n}\n\n.welcome-section h1 {\n  font-size: 2rem;\n  color: #1f2937;\n  margin-bottom: 1rem;\n}\n\n.role-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border-radius: 9999px;\n  font-weight: 500;\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.stat-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.stat-icon {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.25rem;\n}\n\n.stat-content h3 {\n  font-size: 1.5rem;\n  font-weight: 700;\n  margin: 0;\n  color: #1f2937;\n}\n\n.stat-content p {\n  margin: 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.quick-actions {\n  margin-bottom: 2rem;\n}\n\n.quick-actions h2 {\n  margin-bottom: 1rem;\n  color: #1f2937;\n}\n\n.action-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n}\n\n.action-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  text-align: center;\n  cursor: pointer;\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.action-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 15px rgba(0,0,0,0.1);\n}\n\n.action-card i {\n  font-size: 2rem;\n  color: #3b82f6;\n  margin-bottom: 1rem;\n}\n\n.action-card h3 {\n  margin: 0 0 0.5rem 0;\n  color: #1f2937;\n}\n\n.action-card p {\n  margin: 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.recent-orders {\n  margin-bottom: 2rem;\n}\n\n.recent-orders h2 {\n  margin-bottom: 1rem;\n  color: #1f2937;\n}\n\n.orders-table {\n  background: white;\n  border-radius: 1rem;\n  overflow: hidden;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.orders-table table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.orders-table th,\n.orders-table td {\n  padding: 1rem;\n  text-align: left;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.orders-table th {\n  background: #f9fafb;\n  font-weight: 600;\n  color: #374151;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.section-header h2 {\n  font-size: 1.5rem;\n  color: #1f2937;\n  margin: 0;\n}\n\n.order-filters,\n.date-filters,\n.user-filters {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.orders-container,\n.technicians-container {\n  display: grid;\n  gap: 1.5rem;\n}\n\n.order-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.order-header h3 {\n  margin: 0;\n  color: #1f2937;\n}\n\n.order-header p {\n  margin: 0.25rem 0 0 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.status-badge {\n  padding: 0.5rem 1rem;\n  border-radius: 9999px;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n\n.status-badge.pending {\n  background: #fef3c7;\n  color: #d97706;\n}\n\n.status-badge.assigned {\n  background: #dbeafe;\n  color: #2563eb;\n}\n\n.status-badge.in_progress {\n  background: #e0e7ff;\n  color: #6366f1;\n}\n\n.status-badge.completed {\n  background: #d1fae5;\n  color: #059669;\n}\n\n.order-info {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1rem;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n\n.info-item i {\n  color: #3b82f6;\n  width: 16px;\n}\n\n.assigned-technicians {\n  margin-bottom: 1rem;\n}\n\n.assigned-technicians h4 {\n  margin: 0 0 0.5rem 0;\n  color: #374151;\n  font-size: 0.875rem;\n}\n\n.technician-list {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n\n.technician-tag {\n  background: #f3f4f6;\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  color: #374151;\n}\n\n.order-footer {\n  display: flex;\n  gap: 1rem;\n}\n\n.technician-card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.tech-avatar {\n  width: 4rem;\n  height: 4rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  border-radius: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.5rem;\n}\n\n.tech-info {\n  flex: 1;\n}\n\n.tech-info h3 {\n  margin: 0 0 0.5rem 0;\n  color: #1f2937;\n}\n\n.tech-id {\n  color: #6b7280;\n  font-size: 0.875rem;\n  margin-bottom: 1rem;\n}\n\n.tech-details {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n\n.detail-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #374151;\n}\n\n.detail-item i {\n  color: #3b82f6;\n  width: 1rem;\n}\n\n.tech-actions {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.statistics-container {\n  display: grid;\n  gap: 2rem;\n}\n\n.charts-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 2rem;\n  margin-bottom: 2rem;\n}\n\n.chart-card {\n  background: white;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n  overflow: hidden;\n}\n\n.no-feedback {\n  text-align: center;\n  padding: 2rem;\n  color: #6b7280;\n}\n\n.no-feedback i {\n  font-size: 3rem;\n  color: #10b981;\n  margin-bottom: 1rem;\n}\n\n.no-feedback p {\n  margin: 0;\n  font-size: 1rem;\n}\n\n.stat-section {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 1rem;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.stat-section h3 {\n  margin: 0 0 1rem 0;\n  color: #1f2937;\n  border-bottom: 2px solid #3b82f6;\n  padding-bottom: 0.5rem;\n}\n\n.revenue-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n}\n\n.revenue-card {\n  text-align: center;\n  padding: 1rem;\n  background: #f9fafb;\n  border-radius: 0.5rem;\n}\n\n.revenue-card h4 {\n  margin: 0 0 0.5rem 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.amount {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1f2937;\n}\n\n.technician-stats table,\n.feedback-stats table,\n.users-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.technician-stats th,\n.technician-stats td,\n.feedback-stats th,\n.feedback-stats td,\n.users-table th,\n.users-table td {\n  padding: 0.75rem;\n  text-align: left;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.technician-stats th,\n.feedback-stats th,\n.users-table th {\n  background: #f9fafb;\n  font-weight: 600;\n  color: #374151;\n}\n\n.users-container {\n  background: white;\n  border-radius: 1rem;\n  overflow: hidden;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.05);\n}\n\n.empty-state {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #6b7280;\n}\n\n.empty-state i {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  opacity: 0.5;\n}\n\n.empty-state h3 {\n  margin-bottom: 0.5rem;\n  color: #374151;\n}\n\n/* 模态框样式 */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 1rem;\n  max-width: 600px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.5rem;\n}\n\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  transition: all 0.2s;\n}\n\n.modal-close:hover {\n  background: #f3f4f6;\n  color: #374151;\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.assign-form {\n  display: grid;\n  gap: 1rem;\n}\n\n.technician-selection {\n  display: grid;\n  gap: 0.5rem;\n  max-height: 200px;\n  overflow-y: auto;\n  border: 1px solid #e5e7eb;\n  border-radius: 0.5rem;\n  padding: 1rem;\n}\n\n.technician-option {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.technician-label {\n  flex: 1;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  transition: background-color 0.2s;\n}\n\n.technician-label:hover {\n  background: #f9fafb;\n}\n\n.tech-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.tech-name {\n  font-weight: 600;\n  color: #1f2937;\n}\n\n.tech-skill {\n  color: #6b7280;\n  font-size: 0.875rem;\n}\n\n.tech-rate {\n  color: #059669;\n  font-weight: 500;\n  font-size: 0.875rem;\n}\n\n\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .dashboard-header {\n    padding: 0 1rem;\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .header-left {\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .nav-menu {\n    overflow-x: auto;\n  }\n  \n  .dashboard-main {\n    padding: 1rem;\n  }\n  \n  .stats-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .action-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .section-header {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: stretch;\n  }\n  \n  .order-info {\n    grid-template-columns: 1fr;\n  }\n  \n  .tech-details {\n    grid-template-columns: 1fr;\n  }\n  \n  .revenue-stats {\n    grid-template-columns: 1fr;\n  }\n  \n  .modal-content {\n    margin: 1rem;\n    max-height: calc(100vh - 2rem);\n  }\n  \n  .modal-footer {\n    flex-direction: column;\n  }\n  \n  .welcome-content {\n    flex-direction: column;\n    gap: 1rem;\n    text-align: center;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}